#!/bin/bash

# This script checks for required dependencies and sets up the environment for building the project.

# Check if gcc is installed
if ! command -v gcc &> /dev/null
then
    echo "gcc could not be found, please install gcc."
    exit 1
fi

# Check if Lua development files are installed (for Lua 5.4 in this case)
if ! pkg-config --exists lua5.4
then
    echo "Lua 5.4 development files could not be found, please install them."
    exit 1
fi

# Call the configure_mingw.sh script to check mingw64 environment
./configure_mingw.sh

# Check if the 'find' command is available (it should be on most Linux-based systems)
if ! command -v find &> /dev/null
then
    echo "find command could not be found, please install it."
    exit 1
fi

# Check if 'mkdir' command is available (it should be available on most systems)
if ! command -v mkdir &> /dev/null
then
    echo "mkdir command could not be found, please install it."
    exit 1
fi

# Check if 'rm' command is available (it should be available on most systems)
if ! command -v rm &> /dev/null
then
    echo "rm command could not be found, please install it."
    exit 1
fi

# Check if 'make' command is available
if ! command -v make &> /dev/null
then
    echo "make could not be found, please install make."
    exit 1
fi

# Everything is set up, inform the user and suggest running make
echo "Environment is ready. You can now run 'make' to build the project."
